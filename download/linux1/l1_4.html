<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Transitional//EN">
<HTML>
	<HEAD>
		<TITLE>Лабораторная работа 4.</TITLE>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="Authors" content="A.S. Derevjanko, N.V. Maksyuta">
		<meta name="Generator" content="KDevelop">
		<meta name="Description" content="Operating systems, pz ">
		<meta name="Keywords" content="операционные системы, unix, linux">
		<!--                                                                   -->
		<!-- (C) Owner: A.S. Derevjanko, N.v. Maksyuta  -->
		<!-- (C) НТУ "ХПИ". Каф. Вычислительной техники и программирования-->
		<script language="JavaScript">
<!--
  function SWin(str) {
  window.open(str,"window_name", 
    "width=190,height=230,toolbar=no");
    }  
<!---->
		</script>
		<script language="JavaScript">
<!--
  function LWin(str) {
  window.open(str,"window_name", 
    "toolbar=no");
    }  
<!---->
		</script>
	</HEAD>
	<body >
		<p>
			<!--
			<table cellpadding="10">
				<tr>
					<td><a href="../../index.htm">Каталог</a></td>
					<td><a href="../../spo/index.htm">Индекс раздела</a></td>
					<td></td>
				</tr>
			</table>
			-->
			<table cellpadding="10">
				<tr>
					<td><a href="l1_3.html">Назад</a></td>
					<td><a href="index.htm">Оглавление</a></td>
					<td><a href="l1_5.html">Вперед</a></td>
				</tr>
			</table>
		</p>
		<hr>
		<table width="90%">
			<tr>
				<td align="center"><img src="logo_4.gif"><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</samp></td>
				<td>
					<h2 align="center">Лабораторная работа 4</h2>
					<h2 allign=center>  Командный интерпретатор. Переменные окружения.</h2>
					<p><b>Цель работы</b>: изучение основных функций командного интерпретатора и базовых средств  
						    его управления в ОС Linux.
				</p>
				</td>
			</tr>
		</table>
		
			<h3>Выполнение работы</h3>
			<h4>1. Командная оболочка. Bash </h4>
<p>
Важнейшим из пользовательских процессов является командная обо-
лочка (она же командный интерпретатор, или просто shell). Именно
она обеспечивает взаимодействие пользователя с системой в текстовом
режиме, позволяя вводить команды. Именно она запускается, когда вы
регистрируетесь на текстовой консоли, и предоставляет вам интерфейс
командной строки.
<p>
Не нужно, увлекшись удобствами графического интерфейса, недооце-
нивать командную строку. Во-первых, многие административные задачи
могут быть выполнены только оттуда; во-вторых, командная строка — са-
мое удобное средство автоматизации рутинных процедур.
Командой в Linux считается все, что может быть исполнено: испол-
няемые файлы, встроенные команды оболочки, псевдонимы команд,
пользовательские функции, файлы сценариев (скрипты) — заранее под-
готовленные последовательности команд в текстовом виде. 
<p>
Таким образом, <i>командный интерпретатор</i> - это программа, имеющая свои собственные встроенные команды
 (built-in commands), свое собственное переменное окружение (environment), 
а также позволяющая выполнять внешние команды, которые присутствуют в системе.
<p>
Оболочка принимает вводимые пользователем команды, обрабатывает,
если нужно, их аргументы, отправляет команды на выполнение, прини-
мает возвращаемые ими значения и выполняет определенные действия
в зависимости от этих значений. Кроме того, в оболочку встроен язык
программирования (командный язык), позволяющий писать сложные
разветвленные командные сценарии. Именно командный язык отличает
разные оболочки друг от друга, и именно из него исходят пользователи,
выбирая оболочки.
<p>
<p>
Linux является Unix-подобной ОС. Первоначально ОС Linux была разработана Линусом Торвальдсом (Linus Torvalds)
в Университете Хельсинки (Финляндия) на основе ОС Minix - маленькая UNIX-система, созданная Andry Tanenbaum.
Раннее развитие Linux прежде всего было связано с проблемой переключения задач в защищенном режиме для 80386.
И Линус "стал серьезно обдумывать маниакальную идею, как сделать Minix лучше себя самого".
<p>Командная оболочка в UNIX-системах уже существовала, это была оболочка "Bourne shell"(shell Баурна или просто shell).
Немного позднее в UNIX-системах разработали оболочку C shell, которая использует иной синтаксис, чем-то напоминающий 
синтаксис языка программирования Си.
<p>
Для Linux разработано много командных интерпретаторов. Основной, используемой по умолчанию является 
"Bash", разработанная на основе shell и называемая "Новый Shell Баурна" (Bourne Again Shell).
Таким образом, Bash - это развитие прежнего shell с добавлением многих полезных возможностей, 
частично содержащихся в C shell. Поскольку Bash можно рассматривать как надмножество синтаксиса прежнего shell, 
любая программа, написанная на добром старом shell Баурна должна работать и в Bash. 
<p>Однако следует отметить, что ОС Linux не является UNIX-системой, так как ее код был полностью переписан, 
первоначально Линусом, в дальнейшем с помощью многих UNIX-программистов и энтузиастов из Internet, тех, кто
 имеет достаточно навыков и способностей развивать систему. 
<p>Ядро Linux не использует коды UNIX или какого-либо другого частного источника, 
и большинство программ Linux разработаны в рамках проекта GNU из Free Software Foundation в Cambridge, Massachusetts.
Но в него внесли лепту также программисты всего мира.
<p> Вот наиболее распространенные командные оболочи Linux:
<ul>
<li>Bourne shell - оболочка Борна, стандарт для многих UNIX-подобных систем;
<li>bash - Bourne Again shell, «новая оболочка Борна» (используется по умолчанию в Linux);
<li>csh - С shell, оболочка Си: синтаксис ее командного языка похож на
синтаксис языка С;
<li>tcsh - tiny С shell, минимальная оболочка Си;
<li>pdksh - public domain Korn shell, общедоступная оболочка Корна;
<li>sash - stand-alone shell, автономная оболочка, может быть использо-
вана в случае, когда программные библиотеки недоступны.
</ul>
<p>
Список всех установленных в системе программ-оболочек находится в
файле <samp>/etc/shells</samp>.
<p>
Начальная оболочка для каждого пользователя, запускаемая для него при
регистрации в системе, указывается в файле  <samp>/etc/passwd </samp>.
Это может быть не обязательно bash. Администратор может вообще определенным пользователям запретить 
вход в систему, указав в качестве "оболочки", загружаемой после регистрации, /sbin/nologin. 
Или вообще указать специально разработанный скрипт, позволяющий просматривать тоги журналы (логи), например.
<p>Для редактирования файла <samp>/etc/passwd </samp> в Linux существует специальная команда <samp>vipw</samp>,
которая проверяет правильность редактирования (команда доступна только администратору). 
<p><a href="man/etc.html">Описание файлов /etc/passwd, /etc/shadow и /etc/groups</a>

<p>В дальнейшем, при работе в оболочке по умолчанию,  вы можете сменить текущую оболочку на любую из 
установленных (точнее, войти в подоболочку). Чтобы выйти из нее и вер-
нуться в родительскую оболочку, введите команду <samp>exit</samp>. 
В начальной оболочке эта команда завершает сеанс работы.
<p>В любой оболочке можно запускать командные сценарии, состоящие
из команд другой оболочки: первая строка каждого сценария содержит
указание на то, в какой оболочке его следует выполнять, и текущая 
оболочка запускает для него указанную как дочерний процесс.
<p>Как я уже говорила, по умолчанию новому пользователю назначается оболочка bash. Это
прекрасная оболочка, включающая много усовершенствований и лучших
свойств других оболочек, и менять ее я не рекомендую. В дальнейшем,
говоря «оболочка», я буду иметь в виду именно bash.

<p><h4>2. Разбор командной строки, избранные функции bash</h4>
Интерпретатор, получив командную строку, выполняет над ней ряд преобразований, используя для этого свои мощные функции, а именно:
<ol>
   <li> Раскрывает псевдонимы ( alias) для быстрого вызова наиболее употребительных команд.
   <li> Раскрывает метасимволы или группрвые симовлы (*, ?, [, ], ~, {, }) для поиска файлов по шаблонам имен.
   <li> Подставляет переменные,  которые может использовать командный процессор.
   <li> Перенаправляет выходные данные одной команды в качестве входных данны для другой команды, используя конвейер (pipe).
   <li> Выполняет объединение команд.
   <li> Выполняет команду, если она - встроенная команда интерпретатора, или запускает процесс, если команда внешняя. 
   <li> Перенаправляет стандартный ввод/вывод (<a href="l1_5.html">тема лабораторной работы 5</a>).
</ol>

<p>Для выполнения трех последних функций необходимо использование специальных операторов. Разберем все перечисленные функции.
<P>
<i>2.1. Псевдонимы</i>
<p>Псевдонимы команд предназначены для обеспечения более эффективного ввода команд оболочки. Посредством псевдонима команда 
практически любой сложности может быть заменена произвольной строкой. Для того чтобы просмотреть список псевдонимов и, 
при необходимости, добавить в него новый псевдоним, следует воспользоваться командой alias.
<p>
Встроенная команда <a href="./man/_alias.html"><samp>alias</samp></a> назначает псевдоним, т.е. обеспечивает удобный
сокращенный ввод длинных команд. Без аргументов выводит список всех имеющихся псевдонимов. 
Напимер, можно назначить команду "rm" псевдонимом для «rm -i», чтобы не забыть воспользоваться ключом -i. 
Вы тоже можете назначить короткий псевдоним для любой длинной команды.
<p>Чтобы псевдонимы были доступны при входе в систему, определите их в вашем файле ~/.bash_profile
<p>Команда <a href="./man/_unalias.html"> <samp>unalias</samp></a> удаляет псевдоним из списка.
<p>
<i>2.2. Метасимволы</i>
<p>Ключевое свойство большинства оболочек Linux/Unix - это способность ссылаться сразу более, чем на один файл, 
используя для этого специальные символы. Эти, так называемые "метасимволы" (wildcards), позволяют ссылаться, скажем, на все файлы, 
содержащие символ "n". 
<p>В лабораторной работе 1 был описан синтаксис использования группрвых символов, чтобы их можно было использовать при выполнении команд.
<p>Тут не считаю лишним повториться.
<p><u>Типы метасимволов</u>
<ul>
<li>*	- Любой набор символов, в том числе пустая строка.
    Например, когда вы используете символ "*" в имени файла, shell заменяет ее всеми возможными именами файлов из каталога, 
    на который вы ссылаетесь.
<p>Процесс замены "*" на имена файлов называется расширением метасимволов и выполняется самим интерпретатором. 
Это важно: конкретные команды, вроде ls, никогда не видят "*" в своем списке параметров. 
Shell, расширяя метасимволы, включает в список параметров все имена, прошедшие сравнение с шаблоном. 
<p>Однако, использование "*" не даст совпадения с именами файлов, которые начинаются с точки ("."). Эти файлы воспринимаются
 как "спрятанные", хотя на самом деле их никуда не прятали. Они не показываются в списке, выдаваемом нормальной командой ls и не 
 выбираются при использовании "*".  Это мера предосторожности: если "метасимвол *" выбирал бы имена файлов, начинающиеся на ".", 
она бы также выбрала имена "." (ссылка на текущий каталог) и ".." (ссылка на родительский каталог). Но это может быть опасно при 
выполнении ряда команд.
 <p></li>
<li>?	- Любой одиночный символ (позволяет подставить строго один символ).
<p></li>
<li>[набор] -	Любой одиночный символ из заданного набора,
который, как правило, является последовательностью
символов, например [aeiouAEiou] для всех гласных
букв, либо диапазоном с дефисом, например, [А-Z]
для всех заглавных букв
<p></li>
<li> [^набор] -	Любой одиночный символ, не заданный в наборе
<p></li>
<li>[!набор] -	Любой одиночный символ, не заданный в наборе
</li>
</ul>
<p>
<p>Если вы хотите включить в набор символ минуса, то поместите
его первым или последним. Чтобы включить в набор закрывающую
квадратную скобку, поместите ее первой. Чтобы включить в набор
символы ^ или !, не помещайте их на первое место.

<p><i>2.3.Переменные командного интерпретатора</i>
<p>Как любой язык программирования, командный язык bash поддерживает переменные. 
Тип их — строковый. Оператор присваивания
выглядит так:
<p>$имя_переменной=значение
<p>Имя должно начинаться с буквы и может состоять из латинских букв,
цифр, знака подчеркивания. Если значение переменной содержит специальные символы,
в имени файла, то при указании его имени в команде этот символ нужно экранировать
знаком «\» (обратный слэш) или заключать все имя в двойные кавычки.
<p>
Вот ряд символов, которые имеют специальное значение для командного интерпретатора, 
и их использование не рекомендуется:
<p> ~   !   @   #   $  &  %  *  ( ) [ ] { } ' " \ : ; > <   пробел
<p>
Операция подстановки значения переменной обозначается символом $
(не путайте с приглашением bash). Вывести значение переменной можно
командой echo:
<p>
$ cwd=/home/den/MyDownloads/packages
<p>
$ echo cwd 		# выводит имя переменной cwd
<p>$ echo $cwd 		# выводит значение переменной /home/den/MyDownloads/packages
<p>Установленные таким образом переменные доступны только встроенным
командам bash. Чтобы они стали доступны дочерним процессам (про-
граммам и командным сценариям, запускаемым из-под bash), их нужно
поместить в окружение bash. Делается это командой <a href="./man/_export.html"> <samp>export</samp></a>.
<p>Например:
<p>$ export HELLO="Hello from environment! " # пробел нужно экранировать кавычками
<p>
<u>Переменные окружения</u>
<p>Окружение (environment)- это набор переменных, значения которых может менять поведение оболочки.
<p>
Когда оболочка начинает работу, она устанавливает для себя несколько
переменных окружения. Имена их стандартны. Программы и сценарии
могут запросить их значения вместо того, чтобы пытаться выяснить 
нужную им информацию самостоятельно.
<p>
Таким образом, командный интерпретатор определяет переменные окружения, которые используются в текущем сеансе. 
Каждая новая введенная команда фактически запускается как дочерний процесс родительского процесса, в качестве которого, 
в данном случае выступает командный интерпретатор bash.
Переменные окружения отличаются от обычных переменных тем, что они доступны как для родительских, так и для дочерних процессов.
Автоматическое определение переменных окружение происходит после аутентификации пользователя в системе. 
Программа login, в случае успешного завершения процесса аутентификации, на основе файла /etc/passwd определяет какой 
командный интерпретатор будет использоваться в сеансе данного пользователя. После определения командного интерпретатора происходит 
настройка сеанса согласно конфигурационным файлам, представленным ниже.
<p>
<table width=90% border=1>
<tr>
<th>
Конфигурационный файл 
<th>	
Описание
</tr>
<tr>
<td>
/etc/profile
<td>	

Определяет переменные окружения для всех пользователей системы. Данный файл выполняется при первом входе в систему и содержит основные переменные окружения, такие как, переменная поиска расположения команд PATH, переменная имени хоста HOSTNAME, переменная, определяющая размер истории команд HISTSIZE. Кроме того данный файл генерирует дополнительные переменные окружения из конфигурационных файлов, находящихся в каталоге /etc/profile.d .
</tr>
<tr>
<td>
/etc/bashrc
<td>	

Выполняется для всех пользователей, при каждом запуске командного интерпретатора bash. В данном файле определяется значение переменной PS1, а также дополнительные псевдопимы команд (alias). Псевдонимом называется сокращенное произвольно заданное название команды или последовательности команд, позволяющее выполнять сложные последовательности команд, не вводя их с клавиатуры, а вызывая их через обращение к соответствующему псевдониму. Переменные, определенные в данном файле могут«быть переназначены аналогичным пользовательским файлом -/.bashrc, который имеет более высокий приоритет.
</tr>
<tr>
<td>
-/.bashprofile
<td>	

Используется как файл, содержащий индивидуальные настройки пользователя. Выполняется только один раз при входе пользователя в систему. Кроме того, данный файл осуществляет запуск файла -/.bashrc
</tr>
<tr>
<td>
~/.bashrc
<td>	
Данный файл содержит переменные окружения и псевдонимы установленные пользователем. Он выполняется каждый раз при входе пользователя в систему или при открытии нового сеанса bash. Данный файл лучше всего подходит для определения пользовательских переменных и псевдонимов.
</tr>
<tr>
<td>
~/.bash_logout
<td>	
Данный файл выполняется каждый раз при выходе из системы или завершении последнего сеанса интерпретатора bash. По умолчанию в данном файле содержится команда очистки экрана терминала.
</tr>
<tr>
<td>
/etc/inputrc
<td>	

Данный файл содержит описание интерпретации различных сочетаний клавиш, а также содержит специальные комбинации клавиш, нажатие которых вызывает выполнение заданных команд.
</tr>
</table>
<p>
Переменные окружения представляют собой достаточно удобный способ хранения информации, часто используемой в пределах текущего сеанса 
работы с системой. При необходимости пользователь может создать практически любые переменные окружения (старайтесь не изменять 
значения переменных окружения, уже находящихся в использовании) и считывать их значения на протяжении всего времени работы с командной оболочкой.
Для того чтобы создать временную переменную окружения, следует ввести ее имя и присвоить ему соответствующее значение. Например,
<p>export AB=/usr/dog/contagious/ringbearer/grind
<p>В данном примере временной переменной окружения AB присваивается путь к каталогу, расположенному достаточно "глубоко" в иерархии 
каталогов файловой системы. Команда export указывает на необходимость экспорта значения переменной АВ в оболочку, для того чтобы сделать 
его доступным для других оболочек, которые могут быть открыты в пределах текущего сеанса работы с системой. Теперь к указанному выше 
каталогу можно добраться посредством выполнения команды cd $AB
<p>Единственным недостатком временных переменных окружения является то, что они автоматически уничтожаются при завершении текущего сеанса 
работы с системой. Для того чтобы создать постоянную (в отличие от временной) переменную окружения, ее необходимо внести в файл настройки 
командной оболочки .bashrc.
<p>
Для изменения конфигурационных файлов /etc/profile и /etc/bashrc необходимо быть суперпользователем root. 
<p>Обычные пользователи могут изменять конфигурационные файлы ~/.bash_profile, ~/.bashrc и ~/.bash_Iogout, находящихся в их домашних каталогах.
В эти конфигурационные файлы можно включить установку своих переменных в окружение с помощью команды export и использовать их в любом сеансе. 
<p>Одной из наиболее часто изменяемых переменных окружения является переменная PATH. 
Можно также переопределить или дополнить переменную окружения PATH в конфигурационном файле ~/.bashrc. 
<p>PATH=$PATH:~
<p>в данном примере переменная PATH будет содержать ее текущее значение плюс домашний каталог в качестве пути поиска исполняемых файлов.
<p>Чтобы данные изменения применились в окружении текущей оболочки необходимо выполнить команду <samp>source .bashrc</samp>
<p>
<u>Наиболее распространенные переменные окружения командной оболочки:</u>
<ul>
<li> BASH - Содержит полный путь к команде bash (как правило, значение этой
переменной равно /bin/bash).
<li>BASH_VERSION - Номер версии bash.
<li>DIRSTACK-  Массив, содержащий текущее значение стека каталога.
<li>EDITOR - текстовый редактор по умолчанию.
<li>EUID - Числовой эффективный идентификатор текущего пользователя.
<li>FUNCNAME - имя текущей функции в скрипте.
<li>GROUPS - Массив, содержащий список групп, к которым принадлежит текущий
пользователь.
<li>HISTFILE - Местоположение файла истории команд. Как правило, история команд хранится в файле ~/.bash_history.
<li>HISTFILESIZE - Число командных строк, которые могут храниться в файле истории.
После достижения этого числа новые командные строки заносятся в историю за счет удаления наиболее ранних командных строк. По умолчанию размер списка недавно использовавшихся команд равен 1000 строк.
<li>HOME - Домашний каталог пользователя.
<li>HOSTNAME - Имя данного компьютера (узла).
<li>HOSTTYPE - Тип компьютера.
<li>LANG - Текущий используемый по умолчанию язык.
<li>LC_CTYPE - внутренняя переменная, котороя определяет кодировку символов.
<li>MAIL - Местоположения файла ящика электронной почты пользователя. Как правило, это файл, расположенный в каталоге /var/spool/mail, имя которого совпадает с регистрационным именем пользователя.
<li>MAILCHECK - Интервал в минутах между проверками почты.
<li>OLDPWD - Каталог, который являлся текущим до момента последнего изменения каталога.
<li>OSTYPE - Текущая операционная система.
<li>PATH - Разделенный символами двоеточия список каталогов, в которых производится поиск исполняемых файлов. 
Крайне важен порядок ледования имен каталогов. При выполнении команд перечисленные в этой переменной каталоги проверяются 
последовательно слева направо. Т.о., при выполнении команды foo, расположенной в каталогах /bin и /usr/bin, будет выполнена команда,
 расположенная в каталоге /bin. Для того чтобы в аналогичной ситуации была выполнена команда foo, расположенная в каталоге /usr/bin, 
следует либо указать полный путь к этой команде, либо
изменить порядок следования имен каталогов в переменной окружения PATH. Текущий каталог поиска должен быть задан явно ('.'),
 оболочка не производит поиск в текущем каталоге по умолчанию. Поиск запускаемых программ в текущем каталоге таит потенциальную
 опасность вследствие возможности непреднамеренного выполнения опасной программы, поэтому переменная PATH обычно инициализируется 
без '.' Для того, чтобы добавить к переменной PATH путь к своим собственным командам или сценариям оболочки, их следует разместить 
в подкаталоге /bin домашнего каталога, который будет автоматически занесен в переменную PATH. 
Не все исполняемые команды расположены в каталогах, перечисленных в переменной окружения PATH. 
Некоторые команды встроены непосредственно в оболочку. Другие команды могут быть переопределены с помощью псевдонимов, 
позволяющих заменить команды с параметрами практически любой сложности (с точки зрения синтаксиса) одним простым именем. 
Помимо этого, существует возможность создания функций, хранящих в себе целую последовательность команд.
<li>PPID - Идентификационный номер процесса, соответствующего команде, в результате выполнения которой была запущена текущая 
оболочка(например, процесс, породивший оболочку).
<li>PS1, PS2, PS3, PS4 - Переменные, определяющие вид приглашения оболочки. 
<p>Переменные PS1 и PS2 устанавливают первичное и вторичное приглашение командного интерпретатора. 
<p>Первичное приглашение <a href="./man/_ps1.html">(PS1)</a> указывает на готовность интерпретатора к вводу команд.
Значение этой переменной имеет вид "$" для обычных пользователей и "#" для суперпользователя. 
Вообще говоря, приглашение командной строки может содержать в себе достаточно большое количество разнообразных элементов 
(дату, время, регистрационное имя пользователя, сетевое имя компьютера и т.д.). 
Вид приглашения легко изменить, соответствующим образом задав значение переменной PS1. 
<p>В данной переменной содержится строка вида [\u@\h \W]\$, в которой каждому символу соответствует определенное значение.
Допустимые символы, используемые для формирования первичного приглашения, приведены <a href="./man/_ps1.html">здесь</a>.
<p>Вторичное приглашение (PS2) появляется, если вы нажали клавишу Enter, синтаксически не закончив ввод команды.
<p>Данная переменная содержит второстепенное приглашение, которое возникает при многострочном редактировании текста или незавершенном вводе команды. 
По умолчанию оно обозначается как >. 
<p>PS3. Данная переменная содержит приглашение, присутствующее в операторе select, используемой для организации 
интерактивных консольных меню. По умолчанию приглашению PS3 в операторе select соответствует значение #?. 
<p>PS4. Данная переменная используется в основном при отладке сценариев командного интерпретатора и по умолчанию содержит строковое значение «++».
<p>Например, запуск команды получения информации DNS:
<p>[root@rhel5 ~]# nslookup >

<li>PWD - Текущий рабочий каталог пользователя. Это значение изменяется каждый раз при переходе в другой каталог с помощью команды cd.
<li>SECONDS - время работы скрипта(в сек.).
<li>SHELL - Текущий интерпретатор команд.
<li>SHELLOPTS - Список включенных параметров интерпретатора.
<li>SHLVL - Число запусков новых копий интерпретатора команд.
<li>UID - Числовой идентификатор текущего пользователя.
<li>USER - Имя текущего пользователя.
<li>$# - Общее количество параметров переданных скрипту.
<li>$* - Все аргументы переданыне скрипту(выводятся в строку).
<li>$@ - Тоже самое, что и предыдущий, но параметры выводятся в столбик.
<li>$! - PID последнего запущенного в фоне процесса.
<li>$$ - PID самого скрипта.
</ul>
<p>
Чтобы просмотреть значения всех переменных текущего сеанса, как
определенных вами, так и переменных окружения, введите команду <a href="./man/_set.html"><samp>set</a></samp> без параметров или 
 <a href="./man/_env.html"><samp>env</a></samp> или  <a href="./man/_printenv.html"><samp>printenv</a></samp>.
<p>Удалить переменную можно командой <a href="./man/_unset.html"><samp>unset</a></samp>.
<p>
<i>2.4. Подстановки и организация взаимодействия между командами</i>
<p><u>Подстановка значений переменных окружения</u>  текущего сеанса работы с системой может быть осуществлена с помощью 
использования метасимвола знака доллара ($). В результате оболочка автоматически заменяет имя переменной на ее значение. 
Например,
<p>
ls -l $BASH
<p><u>Подстановка результата вычисления арифметического выражения</u>
<P>Существуют две синтаксические формы подстановки результата вычисления арифметического выражения: 
$[выражение] и $((выражение)). Например,
<p>
echo "I am $[2000-1957] years old."
<p>
<u>Подстановка команд</u>
<p>
Подстановка команд позволяет использовать вывод одной команды в командной строке, содержащей другую команду. 
Можно использовать два альтернативных формата подстановки: $(команда) или `команда` (одинарные обратные кавычки). Например,
<p>
ls $(pwd)
<p>
ls `pwd`
<p>
<u>Раскрытие символа тильды</u>
<p> Символ тильды (~) позволяет быстро вводить названия каталогов.
<pre>
~ 		Имя домашнего каталога пользователя
~/подкаталог 	Имя одного из подкаталогов в домашнем каталоге пользователя
~+ 		Имя текущего каталога
~- 		Имя предыдущего каталога
</pre>
<p>
<u>Раскрытие фигурных скобок</u>
<p>
С помощью фигурных скобок можно вместо нескольких однотипных команд ввести одну. В скобках должен содержаться список, 
элементы которого должны быть разделены запятыми. Интерпретатор считывает элементы по одному и с каждым из них формирует 
отдельную команду, которую затем выполняет. Например, команда
<pre>
mkdir expenses/{Jan,Feb,Mar}
эквивалентна
mkdir expenses/Jan
mkdir expenses/Feb
mkdir expenses/Mar
</pre>
<p>
<u>Каналы</u>
<p>
Метасимвол канала (|) указывает на необходимость организации взаимодействия между командами путем использования в качестве входных данных
(ввода) команды результата выполнения (вывода) другой команды. 
Другими словами, с помощью канала (конвейера) результаты первой команды могут быть переданы как входные данные второй команде.
Например, 
<p>cat /etc/passwd | sort | head -3 
<p>
<u>Последовательности и группы команд</u>
<p>
Использование последовательностей и групп команд позволяют ввести несколько команд на одной строке.
<pre>
команда1;команда2 		Выполнить сначала команду 1, затем команду 2

(команда1;команда2) 		Запустить отдельную копию интерпретатора, в которой выполнить 
				последовательно команды 1 и 2

{ команда1;команда2 } 		Выполнить команды 1 и 2 последовательно в текущем интерпретаторе

команда1 && команда2 		Выполнить команду 2 только в случае успешного
				выполнения команды 1

команда1 || команда2 		Выполнить команду 2 только в случае неуспешного
				выполнения команды 1
<p>
Результатом выполнения любой команды (т.е. результатом завершения соответствующего процесса) является код завершения. 
Успешное завершение имеет код 0, неуспешное 1. Значение кода завершения присваивается предопределенной переменной ? (знак вопроса).
Например, echo $?
<p> <u>Повторное выполнение команд</u>
<p>Оболочка располагает средствами, позволяющими вызывать предыдущие команды и редактировать их. История (history) команд оболочки 
представляет собой список использовавшихся ранее команд. Этот список можно просмотреть с помощью команды history.
<p>После ввода командной строки оболочка помещает ее в историю команд. Список ранее использовавшихся команд хранится в файле, который 
позволяет в любое время вызвать из него любую нужную командную строку для повторного выполнения. После повторного вызова командной 
строки она может быть отредактирована. История команд хранится в файле .bash_history, который
находится в домашнем каталоге пользователя. По умолчанию командная оболочка способна "запомнить" до 1000 командных строк.
<p>Для того чтобы посмотреть список ранее использовавшихся команд, выполните команду history.
 Она может употребляться либо без параметров, либо с параметром, позволюящим указать число отображаемых команд.
Каждая командная строка имеет свой номер в истории команд.
<p><pre>
Синтаксис раскрытия истории:
!n 		Выполнить команду с заданным номером
!! 		Выполнить предыдущую команду
!строка 	Выполнить самую последнюю из команд, начинающихся с заданной строки
!?строка? 	Выполнить самую последнюю из команд, содержащих заданную строку
</pre>
Вместо того чтобы непосредственно выполнить командную строку, содержащуюся в истории команд, ее можно вызвать для последующего 
редактирования. Воспользуйтесь клавишами управления курсором <i>"стрелка вверх" и "стрелка вниз" </i>для пошагового просмотра истории
команд и выбора требуемой командной строки.
<h4>3. Встроенные команды bash</h4>
Список встроенных команд оболочки bash можно получить по команде
help или найти на man-странице в секции SHELL BUILTIN COMMANDS.
<p>Вот несколько полезных встроенных команд:
<ul>
<li><a href="./man/_echo.html"><samp>echo [аргументы]</samp></a> — Вывод аргументов на экран.</li>
<li><a href="./man/_enable.html"><samp>enable</samp></a> — Заставляет оболочку вместо встроенной команды выполнить исполняемый 
файл с таким же именем. Полезно, если у вас есть собственный сценарий по имени, например, echo.</li>
<li><a href="./man/_eval.html"><samp>eval [аргументы]</samp></a> — Конструирование команды на лету, из указанных аргументов, и 
отправка ее на выполнение.</li>
<li><a href="./man/_let.html"><samp>let</samp></a> — Вычисление выражений.</li>
<li><a href="./man/_source.html"><samp>source</samp></a> — Прочитать и выполнить команды, содержащиеся
в файле. Применяется для определения пользовательских переменных.
и функций.</li>
<li><a href="./man/_basenam.html"><samp>basename</samp></a></samp> - Выделение локального имени.</li>
<li><a href="./man/_expr.html"><samp>expr</samp></a> </samp>-  Вычисление выражения.</li>
<li><a href="./man/_read.html"><samp>read</samp></a></samp> - Ввод значения переменной.</li>
<li><a href="./man/_shift.html"><samp>shift</samp></a></samp> - Сдвиг списка параметров.</li>
<li><a href="./man/_test.html"><samp>test</samp></a>  - Проверка условия.</li>
</ul>
Другие встроенные команды служат инструкциями командного языка bash.
<p><a href="./var/LR4_IZ.html">Индивидуальные задания</a>
<p align=left> Синтаксис команд см. в <a href=./man/mind.html>Избранные команды и свойства Unix.</a> или в консоли с помощью <samp>man</samp>.
<hr>
					<table cellpadding="10">
						<tr>
							<td><a href="l1_3.html">Назад</a></td>
							<td><a href="index.htm">Оглавление</a></td>
							<td><a href="l1_5.html">Вперед</a></td>
						</tr>
					</table>
</body>
</HTML>
