<html>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <TITLE>ED command.</TITLE>
</head>

<body >
<a name=top>

<p>
<table width=100%>
  <tr>
    <td width=20%>&nbsp;</td>
    <td>
      <table border> 
        <tr><td align=center><big><b>ed</b></big><br>
            &nbsp; интерактивный текстовый редактор&nbsp;
        </tr></td>
      </table>
</td></tr></table>


<table>
<tr>
<td colspan=2><b><br>СИНТАКСИС</b></td>
</tr><tr><td width=10%>&nbsp;</td>
<td><pre>ed [опции] [файл...]</pre>
</td></tr>

<tr>
<td colspan=2><b><br>ОПИСАНИЕ</b></td>
</tr><tr><td width=10%>&nbsp;</td>
<td>Утилита <samp>ed</samp> производит редактирование текстовых 
<samp>файлов</samp> в соответствии с командами редактирования,
задаваемыми пользователем в в командной строке. При вызове
<samp>ed</samp> содержимое файла копируется в буфер (рабочую копию),
и все редактирование происходит в буфере. Содержимое буфера
копируется в редактируемый файл только по команде <samp>w</samp>.
<p>При введении в командной строке ошибочной команды
<samp>ed</samp> печатает символ "<samp>?</samp>". Диагностику ошибки
можно получить командой <samp>H</samp>.

<tr>
<td colspan=2><b><br>ОПЦИИ</b></td>
</tr><tr><td width=10%>&nbsp;</td>
<td>
<table>
<tr>
<td valign=top width=25%><samp>-s </samp></td>
<td>подавление печати количества символов при выполнении команд <samp>e</samp>, <samp>r</samp> и <samp>w</samp>, выдачу диагностики команд <samp>e</samp> и <samp>q</samp>.</td>
</tr>
<tr>
<td valign=top width=25%><samp>-p <i>приглашение</i></samp></td>
<td>установка собственного текста <samp><i>приглашения</i></samp>.
</tr>
</table>
</td></tr>
</table>

<p><b>КОМАНДЫ РЕДАКТИРОВАНИЯ</b>
<p>Команды редактирования имеют формат:
<pre>
    [<i>адрес1</i>[,<i>адрес2</i>]] <i>команда</i>
</pre>
<p><samp><i>Адрес</i></samp> определяет строки, к которым применяется 
<samp><i>команда</i></samp> или команды. Если заданы и первый, и второй 
адреса, то команда применяется к строкам от первого до второго адреса 
включительно. Если задан только первый адрес, то команда применяется к 
строкам, определяемым этим адресом. Если адреса не заданы, 
то команда применяется к текущей строке, если иное не оговорено в описании команды.
<p><samp><i>Адрес</i></samp> может задаваться:<ul>
<li>номером строки;
<li>шаблоном - <a href=brexpr.html>регулярным выражением</a>, заключенным в 
символы "<samp>/.../</samp>" или "<samp>?...?</samp>";
<li>специальным символом "<samp>$</samp>", адресующим последнюю строку файла.
<li>специальным символом "<samp>.</samp>", адресующим текущую строку файла;
<li>специальным символом "<samp>%</samp>", эквивалентным адресу:
"<samp>1,$</samp>";
<li>специальным символом "<samp>;</samp>", эквивалентным адресу:
"<samp>.,$</samp>".
</ul>
<p>При запуске <samp>ed</samp> текущей становится последняя строка
текста. После выполнения любой команды текущей становится последняя
строка, обработанная данной командой.
<p>Изменить адрес текущей строки можно, введя одну из следующих
команд:
<table>
<tr>
<td valign=top width=20%><samp>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>адрес</i>&nbsp;</samp></td>
<td valign=top>текущей становится команда, определяемая <samp><i>адресом</i></samp></td>
</tr>

<tr>
<td valign=top width=20%><samp>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<i>адрес</i>]+[<i>число</i>]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<i>адрес</i>]-[<i>число</i>]&nbsp;</samp></td>
<td valign=top>текущей становится команда, расположенная со смещением
<samp><i>число</i></samp> от заданного <samp><i>адреса</i></samp>;
если <samp><i>адрес</i></samp> не задан, предполагается текущий адрес;
если <samp><i>число</i></samp> не задано, предполагается 1.
</td>
</tr>
</table>
<p>Если шаблон в адресе заключен в символы "<samp>/.../</samp>", поиск
ведется от текущей строки вниз. Если шаблон в адресе заключен в
символы "<samp>?...?</samp>", поиск ведется от текущей строки вверх.
Если при поиске вниз достигнут конец текста, поиск продолжается с
начала текста. Если при поиске вверх достигнуто начало текста, поиск
продолжается с конца текста.

<p>Если в адресных командах не указывается адрес, по умолчанию
подразумевается <samp>.</samp> - текущая строка, если в описании
команды не оговорено иное.
<p>Далее в описании команд редактирования
адресное выражение мы будем условно обозначать символом
<samp><i>@</i></samp>.

<p><b>Команды редактирования</b>
<table>

<tr>
<td valign=top width=30%><samp>H</samp></td>
<td valign=top>вывод диагностики сделанной ошибки.</td> </tr>

<tr>
<td valign=top width=30%><samp>[<i>@</i>]p</samp></td>
<td valign=top>вывод адресуемых строк на печать.</td>
</tr>

<tr>
<td valign=top width=30%><samp>[<i>@</i>]=</samp></td>
<td valign=top>вывод номера адресуемой строки; требуется
только один адрес; по
умолчанию здесь предполагается адрес <samp>$</samp>.</td> </tr>

<tr>
<td valign=top width=30%><samp>[<i>@</i>]a</samp></td>
<td valign=top>переход в режим ввода текста, новый текст размещается после адресуемой строки. Команда требует только одного адреса в адресном выражении (по умолчанию - текущая строка). В режиме ввода вводимый текст добавляется в рабочую копию файла. Для выхода из режима ввода нужно ввести строку, состоящую из единственной точки.</td>
</tr>

<tr>
<td valign=top width=30%><samp>[<i>@</i>]i</samp></td>
<td valign=top>то же, что и команда <samp>a</samp>, но новый текст размещается перед адресуемой строкой.</td>
</tr>

<tr>
<td valign=top width=30%><samp>[<i>@</i>]c</samp></td>
<td valign=top>переход в режим ввода текста, новый текст заменяет блок адресуемых строк.</td>
</tr>

</tr>
<td valign=top width=30%><samp>[<i>@</i>]r [<i>файл</i>]</samp></td>
<td valign=top>чтение текста из <samp><i>файла</i></samp> и вставка его после адресуемой строки. Если <samp><i>файл</i></samp> не задан, подразумевается текущий редактируемый файл. По умолчанию предполагается адрес <samp>$</samp>. В этой команде допустим адрес 0, он означает вставку перед первой строкой.</td>
</tr>

<tr>
<td valign=top width=30%><samp>[<i>@</i>]d</samp></td>
<td valign=top>удаление адресуемых строк.</td>
</tr>

<tr>
<td valign=top width=30%><samp>[<i>@</i>]m<i>адрес<i></samp></td>
<td valign=top>перемещение блока адресуемых строк по адресу <samp><i>адрес</i></samp>, который не должен попадать в диапазон адресуемых строк.</td>
</tr>


<tr>
<td valign=top width=30%><samp>[<i>@</i>]t<i>адрес<i></samp></td>
<td valign=top>копирование блока адресуемых строк по адресу <samp><i>адрес</i></samp>, который не должен попадать в диапазон адресуемых строк.</td>
</tr>

<tr>
<td valign=top width=30%><samp>[<i>адрес</i>]s/<i>шаблон</i>/<i>текст</i>[<i>флаги</i>]</samp></td>
<td valign=top>замена в адресуемых строках заданного шаблона заданным текстом. 
<br><samp><i>Шаблон</i></samp> задается регулярным выражением.
<br>В <samp><i>тексте</i></samp> может использоваться метасимвол "<samp>&amp;</samp>" для обозначения заменяемого текста.
<br>Возможные <samp><i>флаги</i></samp> команды <samp>s</samp>:
    <table>
</tr>
    <tr>
    <td valign=top width=20%><samp>&nbsp;&nbsp;&nbsp;&nbsp;<i>число</i></samp></td>
    <td valign=top>замена задаваемого <samp><i>числом </i></samp> вхождения шаблона (по умолчанию заменяется только первое вхождение);</td></tr>
</tr>
    <tr>
    <td valign=top width=20%><samp>&nbsp;&nbsp;&nbsp;&nbsp;g</samp></td>
    <td valign=top>замена всех вхождений шаблона в строку.</td></tr>
</tr>
    </table></td>
</tr>

<tr>
<td valign=top width=30%><samp>[<i>@</i>]w [<i>файл</i>]</td>
<td valign=top>вывод адресуемых строк из буфера в <samp><i>файл</i></samp>. Если <samp><i>файл</i></samp> не задан, подразумевается текущий редактируемый файл. По умолчанию предполагается адрес <samp>1,$</samp>, то есть все строки.</td>
</tr>


<tr>
<td valign=top width=30%><samp>e [<i>файл</i>]</td>
<td valign=top>команда уничтожает содержимое буфера и читает в буфер заданный <samp>файл</samp> (по умолчанию - текущий редактируемый файл). Имя текущего редактируемого файла при этом не изменяется.</td>
</tr>

<tr>
<td valign=top width=30%><samp>q</samp></td>
<td>выход из редактора <samp>ed</samp>.</td>
</tr>
</table>

<table>
<td colspan=2><b><br>СМ.ТАКЖЕ</b></td>
</tr>
<tr><td width=10%>&nbsp;</td>
<td>
<samp>
  <a href=_sed.html>sed</a>,
  <a href=_vi.html>vi</a>.
</samp>
</td></tr></table>

<p><hr>
<a href=mind.html#ed>Список команд</a>
</body>
</html>

