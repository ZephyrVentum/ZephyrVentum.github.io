<html>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <TITLE> fuser command.</TITLE>
</head>

<body >
<a name=top>

<p>
<table width=100%>
  <tr>
    <td width=20%>&nbsp;</td>
    <td>
      <table border> 
        <tr><td align=center><big><b>fuser</b></big><br>
            &nbsp; идентифицирует процессы, которые используют указанные файлы или сокеты    &nbsp;
        </tr></td>
      </table>
</td></tr></table>


<table>
<tr>
<td colspan=2><b><br>СИНТАКСИС</b></td>
</tr><tr><td width=10%>&nbsp;</td>
  <td><pre>       
    fuser [-a|-s|-c] [-4|-6] [-n  space ] [-k [-i] [-signal ] ] [-muvf] name ...
    fuser -l
    fuser -V   
</pre>
</td></tr>
</table>

<table>
<tr>
<td colspan=2><b><br>ОПИСАНИЕ</b></td>
<td></td>
</tr><tr><td width=10%>&nbsp;</td>
<td>
<p>Команда <samp>fuser</samp>отображает идентификаторы процессов (PIDs), которые используют в данный момент 
указанные файлы или файловые системы, заданные аргументом name. По умолчанию во время вывода информации после имени 
каждого файла следует буква, показывающая вид доступа: 
<p>
<pre>
    c
        текущий каталог. 
    e
        запущенный исполняемый файл. 
    f
        открытый файл. По умолчанию в режиме вывода информации буква f может отсутствовать. 
    F
        открытый для записи файл. По умолчанию в режиме вывода информации буква F может отсутствовать. 
    r
        корневой каталог. 
    m
        отображаемый файл или разделяемая (совместно используемая) библиотека. 
</pre>
<p>Команда fuser возвращает ненулевой код возврата, если ни один из указанных файлов не "захвачен" ни одним процессом или
 в случае возникновения фатальной ошибки. Если найден хотя бы один процесс, который использует name, то команда fuser возвращает ноль.
<p>
В случае просмотра процессов, которые используют сокеты TCP и UDP, соответствующее название space должно быть указано 
с параметром -n. По умолчанию команда fuser будет искать по сокетам IPv6 и IPv4. Чтобы изменить установки, действующие по 
умолчанию, необходимо использовать параметры -4 и -6. В качестве сокета(-ов) может быть указан как локальный, так и удалённый порт 
или удалённый адрес. Хотя все поля являются необязательными, однако перед пропущенными полями запятые должны присутствовать:
<p>
[lcl_port][,[rmt_host][,[rmt_port]]]
<p>
Для адресов IP и номеров портов может быть указан либо номер порта, либо его символьное название.
<p>
На стандартное устройство вывода fuser направляет только идентификаторы процессов (PIDs), всё остальное направляется на стандартное устройство вывода ошибок.   

</td>
</tr>
<tr>
<td><b>ПАРАМЕТРЫ<b></td>
<td></td>
</tr>
</table>
<pre>
-a
    Показывает информацию для всех файлов, которые указаны в командной строке. По умолчанию выводятся имена только тех файлов, 
    которые используются хотя бы одним процессом. 
-c
    Подобно параметру -m и применяется для совместимости с POSIX. 
-f
    Игнорируется без предупреждения. Применяется для совместимости с POSIX. 
-k
    Уничтожает (завершает) процессы, которые используют указанный файл. Посылаемый сигнал завершения SIGKILL можно заменить 
    с помощью параметра -signal. Процесс fuser никогда не уничтожит себя сам, однако может завершить работу других процессов fuser. 
    Перед попыткой уничтожить выполняющийся процесс, команда fuser устанавливает эффективный идентификатор пользователя ID этого 
    процесса в идентификатор собственного пользователя. 
-i
    Перед завершением процесса потребует подтверждения от пользователя. Если не задан параметр -k, этот параметр игнорируется 
    без предупреждения. 
-l
    Выводит список всех существующих названий сигналов. 
-m
    В качестве name указывается файл на смонтированной файловой системе или смонтированное специальное блочное устройство. 	
    Выводится список всех процессов, которые используют файлы на этой файловой системе. Если указанный файл является каталогом, 
    тогда к его имени автоматически добавляется name/. и рассматривается любая файловая система, которая может быть смонтирована 
    на этот каталог. 
-n space
    Выбирает различные множества имён. Поддерживаются такие множество имён как file (по умолчанию это имена файлов), udp (локальные 
    порты UDP) и tcp (локальные порты TCP). Для портов может быть указан либо номер порта, либо его символьное название. Можно
    использовать сокращенную запись цифрами name/Ispace (например, 80/tcp ), если она однозначно характеризует объект. 
-s
    Выполняет операции без вывода сообщений. Параметры -u и -v игнорируются в этом режиме. Параметр -a не должен использоваться с 
    параметром -s. 
-signal
    Посылает процессу указанный сигнал завершения работы вместо обычного SIGKILL. Сигналы могут быть заданы по названию 
    (например, -HUP) или по номеру (например, -1). Этот параметр без предупреждения игнорируется, если не используется параметр -k. 
-u
    Добавляет к каждому PID имя владельца процесса. 
-v
    Режим подробного информирования. Процессы показываются в стиле вывода команды ps.
     Поля PID, USER и COMMAND подобны выводу команды ps. Поле ACCESS показывает процесс, который использует файл. Если объект
    используется ядром (например, в случае точек монтирования, swap файла и др.), вместо PID отображается строка kernel. 
-V
    Выводит информацию о версии программы. 
-4
    Выполняется поиск только для сокета IPv4. Этот параметр не должен использоваться с параметром -6 и работает только с названиями 
    space tcp и udp. 
-6
    Выполняется поиск только для сокета IPv6. Этот параметр не должен использоваться с параметром -4 и работает только с названиями 
    space tcp и udp. 
-
    Сбрасывает все параметры и устанавливает сигнал уничтожения процессов в SIGKILL. 
 </pre>
<p>

<b>ПРИМЕРЫ</b>
<p>fuser -km /home    уничтожает все процессы, использующие каким-либо образом файловую систему /home.
<p>
if fuser -s /dev/ttyS1; then :; else something; fi вызывает выполнение something, если никакой другой процесс не использует /dev/ttyS1.
<p>
fuser telnet/tcp показывает все процессы (локальные) на порте TELNET.  
<p>
<b>ОГРАНИЧЕНИЯ</b>
<p>
Информация о процессах, которые используют в различное время и по разному один и тот же файл или файловую систему, отображается 
только один раз.
Если один и тот же объект указывается в командной строке в различное время, то в дальнейшем некоторые из этих запросов могут быть 
проигнорированы.
<p>
Без запуска с необходимыми привилегиями команду fuser можно использовать для сбора предварительной неполной информации. 
Поскольку информация о файлах, открытых процессами, которые принадлежат другим пользователям, может отсутствовать в списке вывода, 
а режим выполнения может классифицироваться только как режим отображения на объект.
<p>
Установка для fuser бита привилегий суперпользователя SUID может устранить проблемы, которые связаны с неполной информативностью 
вывода программы для обычного пользователя, однако это может быть нежелательным с точки зрения информационной безопасности системы и 
соображений конфиденциальности личной информации.
<p>
Названия протоколов udp, tcp и доменных сокетов UNIX могут быть не найдены на старых ядрах (старее чем 1.3.78).
<p>
В настоящее время udp и tcp работают с IPv6 и IPv4, но адресные поля могут быть заданы только для IPv4 адресации.
<p>
Процессы, которые принадлежат ядру, выводятся только с параметром -v.
<p>
Параметр -k имеет силу только для процессов. Если владельцем процесса является ядро, fuser сообщит об этом и никаких действий не будет предпринимать.  
<p>
<b>ОШИБКИ</b>
<p>
Команда fuser -m /dev/sgX отобразит (или уничтожит с параметром -k) все процессы даже в том случае, если она не знает какое
 устройство сконфигурировано. Возможно она сделает это для различных устройств.
<p>
fuser не сможет дать информацию о любых процессах, режим доступа к которым запрещает просматривать файловую таблицу дескрипторов. 
В большинстве случаев эта проблема возникает при просмотре информации по сокетам TCP или UDP когда fuser выполняется от имени 
не суперпользователя. В этом случае fuser сообщит о невозможности доступа к необходимой информации.   

<table>
<tr>
<td colspan=2><b><br>СМ.ТАКЖЕ</b></td>
</tr><tr><td width=10%>&nbsp;</td>
<td>
  <a href=_ps.html>ps</a>
</td>
<td>
  <a href=_kill.html>kill</a>
</td>
<td>
  <a href=_pkill.html>pkill</a>
</td></tr></table>

<p><hr>
<a href=mind.html#fuser>Список команд</a>
</body>
</html>
