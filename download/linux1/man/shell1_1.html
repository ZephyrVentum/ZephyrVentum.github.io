<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Transitional//EN">
<HTML>
<HEAD>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta name="Author" content="NPO KLOTO">
   <meta name="Generator" content="Far Editor">
   <meta name="Description" content="Unix">
   <meta name="Keywords" content="unix, shell">
   <title> Интерпретатор командного языка shell. 1</title>
<!--                                                                   -->
</head>

<body >
<p>
<table cellpadding=10>
<tr><td><a href=mind.html>Список команд</a></td></tr>
</table>
<table cellpadding=10>
<tr><td><a href=shindex.html>Оглавление</a></td><td><a href=shell1_2.html>Вперед</a></td></tr>
</table>
</p>
<hr>
<a name=1>
<h3 align=center>1. Основные понятия языка shell</h3>
<a name=1_1></a>
<h4>1.1. Ввод-вывод</h4>
<p align=justify>     Три направления ввода-вывода являются выделенными -  стандартный ввод, стандартный вывод  и  стандартный  протокол.  Как правило, команды берут исходные данные из стандартного ввода  и помещают результаты в стандартный вывод.
<p align=justify>     Стандартные ввод, вывод и  протокол  можно  переназначить.
Обозначение
<pre>
        &lt; &lt;имя файла>
</pre>
служит для переназначения стандартного ввода (дескриптор файла 0),
<pre>
        > &lt;имя файла>
</pre>
для стандартного вывода (дескриптор файла 1);
<pre>
        &lt;&lt; &lt;строка>
</pre>
ввод происходит со стандартного ввода, пока не встретится  указанная &lt;строка> или конец файла,
<pre>
        >> &lt;имя файла>
</pre>
для стандартного вывода; если файл существует, то выводимая информация добавляется к конец этого файла,
<pre>
        &lt;& &lt;цифра>
</pre>
в качестве стандартного ввода объявляется файл, ассоциированный
с дескриптором &lt;цифра>; аналогично для стандартного вывода
<pre>
        >& &lt;цифра>
        &lt;&- и >&-
</pre>
закрывают соответственно стандартный ввод и вывод.
<p align=justify>Если любой из этих конструкций предшествует  цифра,  то  с указанным файлом будет ассоциирован дескриптор, равный  указанной цифре, вместо 0 и 1 по умолчанию. Например, 
<pre>
        2 > &lt;имя файла>
</pre>
для стандартного протокола используется дескриптор 2, а
<pre>
        2 >& 1
</pre>
ассоциирует дескриптор 2 с файлом, ассоциированным с дескриптором 1.
<pre>
            ...  2>protocol
</pre>
переназначает  стандартный  протокол  (дескриптор  2) в файл по
имени protocol.
<p align=justify>Чтобы переназначить стандартный протокол туда же, куда уже назначен стандартный вывод, следует употребить конструкцию
<pre>
            ...  2>&1
</pre>
     Важен порядок переназначения: shell  производит  переназначение слева направо по указанному списку. Так,
<pre>
        1 > xxx 2 >& 1
</pre>
сначала ассоциирует дескриптор 1 с файлом xxx, а затем дескриптор 2 с 1, т.е. тоже с xxx. А
<pre>
        2 >& 1 1 > xxx
</pre>
ассоциирует дескриптор 2 с терминалом, а 1 - с файлом xxx.
<p align=justify>  Можно переназначить системный ввод на текущий файл:
<pre>
isql - - &lt;
</pre>
<a name=1_2></a>
<h4>1.2. Синхронное и асинхронное выполнение команд</h4>
<p align=justify>Обычно shell ждет завершения  выполнения  команды.  Однако имеется возможность запустить задачу в асинхронном режиме, т.е. без ожидания ее завершения. Для этого после команды (после всех ее аргументов и указаний о  переназначении  ввода-вывода)  надо поставить знак &. При этом по умолчанию стандартный ввод команды назначается на пустой файл /dev/null.
<p align=justify>Пример: создать файл primer можно по команде
<pre>
        echo > primer
</pre>
<p align=justify>Еще пример: запустить программу prog в асинхронном режиме, чтобы не надо было дожидаться его завершения, засечь время  выполнения, результаты программы направить в файл prog.res, данные о времени выполнения - в файл prog.tim.
<pre>
        time prog > prog.res 2> prog.tim &
</pre>
<a name=1_3></a>
<h4>1.3. Конвейер</h4>
<p align=justify>    Конвейер - последовательность команд, разделенных знаком |. Если после конвейера стоит ; shell  ждет его завершения. Если & - то не ждет. Роль ; может играть конец строки. Смысл конвейера в том, что стандартный вывод одной команды замыкается на  стандартный ввод другой. Пример конвейера - подсчитать  число  объектных файлов в текущем каталоге.
<pre>
        ls *.o | wc -l
</pre>
<a name=1_4></a>
<h4>1.4. Метасимволы, генерация имен файлов</h4>
<p align=justify>Метасимволы - символы, имеющие  специальное  значение  для интерпретатора :
<pre>
   ? * ; & ( ) | ^ &lt; > &lt;пробел> &lt;табуляция> &lt;возврат_каретки>
</pre>
<p align=justify>Однако каждый из этих символов может представлять самого  себя, если перед ним стоит \. Все символы, заключенные между кавычками ' и ', представляют самих себя. Между двойными кавычками (") выполняются подстановки команд (см п. 2.2) и параметров (см. п. 2.3), а символы \, `," и $ могут экранироваться  предшествующим символом \.
<p align=justify>После всех подстановок в каждом слове команды ищутся  символы *,?, и [. Если находится хотя бы один из них, то это слово рассматривается как шаблон имен  файлов  и  заменяется  именами файлов, удовлетворяющих данному шаблону (в алфавитном порядке). Если ни одно имя файла не удовлетворяет шаблону, то он остается неизменным. Значения указанных символов:
<p><table border=0 width=100%>
<tr valign=top> * <td>  любая строка, включая и пустую
<tr valign=top><td>   ? <td>   один любой символ
<tr valign=top><td>  [...] <td>  любой из указанных между  ними  символов.  Пара  символов, разделенных знаком -, означает  любой  символ, который находится между ними, включая и  их самих. Если первым символом после  "["  идет  "!", то указанные символы не должны  входить  в  имя файла
</table>
<p><hr>
<table cellpadding=10>
<tr><td><a href=mind.html>Список команд</a></td></tr>
<tr><td><a href=shindex.html>Оглавление</a></td><td><a href=shell1_2.html>Вперед</a></td></tr>
</table>
</p>
</body>
</html>
