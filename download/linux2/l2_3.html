<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Transitional//EN">
<HTML>
	<HEAD>
		<TITLE>Лабораторная работа 11.</TITLE>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 		<meta name="Authors" content="Alexander S. Derevjanko, Nataliya V. Maksyuta ">
  		<meta name="Generator" content="KDevelop">
  		<meta name="Description" content="Operating systems, labs ">
   		<meta name="Keywords" content="операционные системы, unix, linux">
		<!--                                                                   -->
		<!-- (C) НТУ "ХПИ". Каф. вычислительной техники и программирования. -->
	</HEAD>


<body>
<p>
<table cellpadding=10>
<tr>
<td><a href=l2_2.html>Назад</a></td><td><a href=index.htm>Оглавление</a></td><td><a href=l2_4.html>Вперед</a></td></tr>
</table>
</p>
<hr>

<table width=90%>
<tr><td align=center><img src=logo_3.gif><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>
<h2 align=center>Лабораторная работа №11</h2>
<h2 align="center">Обмен данными между процессами с помощью неименованных программных каналов</h2>

<p><b>Цель работы</b>: освоение неименованных программных каналов как способа обмена данными 
   между процессами.
</td></tr></table>

<h3>Каналы - общее сведения</h3>

<p>Программный канал в Unix/Linux представляет собой одно из средств 
   взаимодействия между процессами. Само название (pipe, дословно - трубка) 
   достаточно точно передает смысл функционирования этого средства. Канал 
   подобен трубопроводу, проложенному между двумя процессами, и по этому 
   трубопроводу процессы могут пересылать друг другу данные. Подобно 
   трубопроводу, канал имеет собственную емкость, данные, направленные в канал 
   процессом-отправителем, не обязательно должны быть немедленно прочитаны 
   процессом-получателем, но могут накапливаться в канале. Как и у 
   трудобровода, емкость канала конечна, когда она будет исчерпана, запись в 
   канал становится невозможной.

<p>Операционные системы Unix/Linux представляеют в распоряжение программистов 
   два вида каналов - именованные и неименованные. Работа с обоими видами во 
   многом подобна работе с файлами.

<h4>Неименованные каналы</h4>

<p>Неименованный канал является средством взаимодействия между связанными 
   процессами - родительским и дочерним. Родительский процесс создает канал 
   при помощи системного вызова:
<pre>
    int <a href=./man/_pipe.html>pipe</a>(int fd[2]);
</pre>

<p>Массив из двух целых чисел является выходным параметром этого системного 
   вызова. Если вызов выполнился нормально, то этот массив содержит два 
   файловых дескриптора. <samp>fd[0]</samp> является дескриптором для чтения 
   из канала, <samp>fd[1]</samp> - дескриптором для записи в канал. Когда 
   процесс порождает другой процесс, дескрипторы родительского процесса 
   наследуются дочерним процессом, и, таким образом, прокладывается 
   трубопровод между двумя процессами. Естественно, что один из процессов 
   использует канал только для чтения, а другой - только для записи (сами 
   представьте себе, что произойдет, если это правило будет нарушаться). 
   Поэтому, если, например, через канал должны передаваться данные из 
   родительского процесса в дочерний, родительский процесс сразу после 
   запуска дочернего процесса закрывает дескриптор канала для чтения, а 
   дочерний процесс закрывает дескриптор для записи. Если нужен 
   двунаправленный обмен данными между процессами, то родительский процесс 
   создает два канала, один из которых используется для передачи данных в 
   одну сторону, а другой - в другую. После получения процессами дескрипторов 
   канала для работы с каналом используются файловые системные вызовы:
<pre>
   int <a href=./man/_read.html>read</a>(int pipe_fd, void *area, int cnt);
   int <a href=./man/_write.html>write</a>(int pipe_fd, void *area, int cnt);
</pre>

<p>Первый аргумент этих вызовов - дескриптор канала, второй - указатель на 
   область памяти, с которой происходит обмен, третий - количество байт. Оба 
   вызова возвращают число переданных байт (или -1 - при ошибке).

<p>Выполнение этих системных вызовов может переводить процесс в состояние 
   ожидания. Это происходит, если процесс пытается читать данные из пустого 
   канала или писать данные в переполненный канал. Процесс выходит из 
   ожидания, когда в канале появляются данные или когда в канале появляется 
   свободное место, соответственно.

<p>При завершении использования канала процесс выполняет системный вызов:
<pre>
   int <a href=./man/_close.html>close</a>(int pipe_fd);
</pre>

<p>Если родительский процесс, создавший канал, порождает несколько дочерних
   процессов, то все дочерние процессы подключены к другому концу канала.
   Если, например, родительский процесс выводит данные в канал, то они
   "достанутся" тому дочернему процессу, который раньше выполнит системный
   вызов <a href=./man/_read.html>read</a>.


<h3>Постановка задачи</h3>
<p>I. Проанализировать результат работы программы-примера.
<p>II. Модифицировать программу, разработанную в лабораторной работе №9, в соответствии с индивидуальным заданием с учетом следующих требований:
<ol>
<li>Исходные данные задать в родительском процессе с клавиатуры.
<li>Работа всех процессов должна выполняться параллельно.
<li>Обмен данными между процессами-потомками и процессом-родителем осуществить через неименованный программный канал.
<li>Ход работы процессов отобразить на экране.
<li>Вариант индивидуального задания выбрать в соответствии с номером по списку в журнале группы.
</ol>
<p><a href="./var/L3_IZ.html">Индивидуальные задания</a>
			<h3>Отчет по лабораторной работе</h3>
		<p>Отчет по лабораторной работе оформить на украинском языке в соответсвии со следующими пунктами:
			<ul>
				<li>
				Номер работы
				<li>
				Тема работы
				<li>
				Цель работы
				<li>
				Постановка задачи и индивидуальное задание
				<li>
				Тексты программ
				<li>
				Текстовое или графическое описание алгоритмов функционирования программ
				<li>
				Протокол работы программ
				<li>
				Выводы
			</ul>

<p>Пример выполнения основной части работы №11 приведен <a href=ex2_3.html>здесь</a>. 

			<p><hr>
			 <h3 align=center>Справочный материал</h3>
			  <p align=center><a href=./man/mind.html>Избранные системные вызовы Linux/Unix.</a> Краткое описание.
			  <p align=center>Cправочник библиотечных функция языка С: <a href="./man/tcclib1.txt">часть 1</a>, 
			  <a href="./man/tcclib2.txt">часть 2</a> (кодировка кириллица ibm866).
	  
					<hr>

<table cellpadding=10>
<tr><td><a href=l2_2.html>Назад</a></td>
<td><a href=index.htm>Оглавление</a></td><td><a href=l2_4.html>Вперед</a></td></tr>
</table>
</body>
</html>
