<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Transitional//EN">
<HTML>
	<HEAD>
		<TITLE>Лабораторная работа 12.</TITLE>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 		<meta name="Authors" content="Alexander S. Derevjanko, Nataliya V. Maksyuta ">
  		<meta name="Generator" content="KDevelop">
  		<meta name="Description" content="Operating systems, labs ">
   		<meta name="Keywords" content="операционные системы, unix, linux">
		<!--                                                                   -->
		<!-- (C) НТУ "ХПИ". Каф. вычислительной техники и программирования. -->
	</HEAD>	<body>
		<p>
			<table cellpadding="10">
				<tr>
					<td><a href="l2_3.html">Назад</a></td>
					<td><a href="index.htm">Оглавление</a></td>
					<td><a href="l2_5.html">Вперед</a></td>
				</tr>
			</table>
		</p>
		<hr>
		<table width="90%">
			<tr>
				<td align="center"><img src="logo_4.gif"><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</samp></td>
				<td>
					<h2 align="center">Лабораторная работа №12</h2>
					<h2 align="center">Обмен данными между процессами с помощью именованных каналов </h2>
					<p><b>Цель работы</b>: освоение именованных программных каналов как способа обмена 
						данными между процессами.</p>
				</td>
			</tr>
		</table>
		<h3>Именованные каналы</h3>
		<p>
			Именованные каналы (в UNIX их иногда называют FIFO) могут использоваться как 
			средство взаимодействия между неродственными и даже удаленными процессами. 
			Такой канал имеет внешнее имя, которое включается в пространство имен файловой 
			системы. Поэтому именованный канал еще более похож на файл, чем неименованный. 
			В системе канал представляется специальным файлом и создается специальным 
			системным вызовом:
			<pre>
    int <a href="./man/_mknod.html">mknod</a>(char *name, int mode, int dev);
</pre>
			Этот системный вызов может использоваться также и для создания обычных файлов, 
			каталогов и других специальных файлов. Параметр <samp>name</samp> этого вызова 
			является указателем на символьную строку, содержащую имя канала (имя может 
			включать в себя также и путь). Параметр <samp>mode</samp> определяет тип 
			создаваемого файла и режим доступа к нему. Старшие 7 бит этого числа определяют 
			тип создаваемого файла (для именованного канала он может кодироваться 
			макроконстантой: <samp>S_IFIFO</samp>, младшие 9 бит определяют права доступа "<samp>rwx</samp>" 
			для владельца (старшая тройка), для группы (средняя тройка), для всех прочих 
			(младшая тройка). Так, например, для канала, который будет доступен только для 
			владельца, код параметра <samp>mode</samp> будет <samp>S_IFIFO|0x140</samp>, а 
			для канала, доступного для всех-всех-всех - <samp>S_IFIFO|0x1B6</samp>. 
			(Естественно, право "<samp>x</samp>
		" для канала не определяется.) Третий параметр при создании канала задается 0.
		<p>
			Далее при работе с именованным каналом используются файловые системные вызовы:
			<pre>
    int <a href="./man/_open.html">open</a>(int *name, int oflag);
    int <a href="./man/_read.html">read</a>(int pipe_fd, void *area, int cnt);
    int <a href="./man/_write.html">write</a>(int pipe_fd, void *area, int cnt);
    int <a href="./man/_close.html">close</a>(int pipe_fd);
</pre>
			Обратите внимание на то, что при открытии файла-канала могут быть заданы флаги 
			открытия, среди которых может быть и флаг <samp>O_NDELAY</samp>. Если 
			именованный канал открыт с этим флагом, то процесс, работающий с именованным 
			каналом, не переходит в ожидание в тех случаях, которые приводят к приостановке 
			процесса, работающего с неименованным каналом, - вместо этого системные вызовы <samp>
				<a href="./man/_read.html">read</samp></A> и <samp><a href="./man/_write.html">write</a></samp>
		заканчиваются с признаком ошибки.
		<p>Именованный канал является постоянным объектом, он сохраняется даже после 
			завершения создавшего его процесса и при необходимости должен быть уничтожен 
			явно - при помощи системного вызова:
			<pre>
    int <a href="./man/_unlink.html">unlink</a>(char *name);
</pre>
			<h3>Постановка задачи</h3>
		<p>I. Проанализировать результат работы программы-примера.
		<p>II. Разработать комплекс программ/программу, в котором организован обмен данными между родителем (1) и потомками (2–4) с помощью именованных каналов в соответствии со схемой индивидуального задания (символ -> означает направление передачи данных) с учетом следующих требований:
			<ul>
			<li>Для нечетных вариантов. При попытке чтения из пустого канала работа процесса приостанавливается до появления данных в канале. При попытке записи в переполненный канал работа процесса приостанавливается до освобождения канала.
			<li>Для четных вариантов. Работа процесса не приостанавливается ни при попытки чтения из пустого канала, ни при попытки записи в переполненный канал.
			<li>Данные для передачи вводить с клавиатуры.
			<li>Ход работы процессов отобразить на экране.
			<li>Завершать цикл передачи данных по команде с клавиатуры.
			<li>Вариант индивидуального задания выбрать в соответствии с номером по списку в журнале группы.
			</ul>
			<p><a href="./var/L4_IZ.html">Индивидуальные задания</a>	
			<h3>Отчет по лабораторной работе</h3>
			<p>Отчет по лабораторной работе оформить на украинском языке в соответсвии со следующими пунктами:
			<ol>
				<li>
				Номер работы
				<li>
				Тема работы
				<li>
				Цель работы
				<li>
				Постановка задачи и индивидуальное задание
				<li>
				Тексты программ
				<li>
				Текстовое или графическое описание алгоритмов функционирования программ
				<li>
				Протокол работы программ
				<li>
				Выводы
			</ol>

		<p>Пример выполнения основной части работы №12 приведен <a href="ex2_4.html">здесь</a>.

			<p><hr>
			 <h3 align=center>Справочный материал</h3>
			  <p align=center><a href=./man/mind.html>Избранные системные вызовы Linux/Unix.</a> Краткое описание.
			  <p align=center>Cправочник библиотечных функция языка С: <a href="./man/tcclib1.txt">часть 1</a>, 
			  <a href="./man/tcclib2.txt">часть 2</a> (кодировка кириллица ibm866).
	  
					<hr>
			<table cellpadding="10">
				<tr>
					<td><a href="l2_3.html">Назад</a></td>
					<td><a href="index.htm">Оглавление</a></td>
					<td><a href="l2_5.html">Вперед</a></td>
				</tr>
			</table>
		</p>
	</body>
</HTML>
