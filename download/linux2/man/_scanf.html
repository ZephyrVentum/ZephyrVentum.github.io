<html>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <TITLE>WAIT system call.</TITLE>
</head>
<body >    

<a name=top>

<p>
<table width=100%>
<tr><td width=20%>&nbsp;</td>
<td>
<table border> 
  <tr><td align=center><big><b><samp>scanf, fscanf, sscanf</samp></b></big><br>
&nbsp;&nbsp;ввод с преобразованием по формату &nbsp;&nbsp;
</tr></td> </table>
</td></tr></table>


<p><b>Синтаксис</b>
<table width=100%>
<tr><td width=10%>&nbsp;</td>
<td>
<pre>
    #include &lt;stdio.h&gt;

	int scanf (char * format [, pointer] ...)
	
	int fscanf (FILE *stream, char *format [, pointer] ...)
	
	int sscanf (char *s, char *format [, pointer] ...)
	</pre>
</td></tr></table>

<p><b>Описание</b>

<table width=100%>
<tr><td width=10%>&nbsp;</td>
<td>
  <p>Функция <samp>scanf</samp> читает данные из стандартного потока ввода <samp>stdin</samp>. 
  <p>Функция <samp>fscanf</samp> читает данные из потока ввода, заданного аргументом <samp>stream</samp>. 
  <p>Функция <samp>sscanf</samp> читает цепочку символов с адресом <samp>s</samp>. 
  <p>Каждая из перечисленных функций вводит символы, интерпретирует их в соответствии с форматом и записывает по указанным адресам. 
   <p>Аргументами функций являются: 
   <ul>
   <li><samp>format </samp>- формат, управляющий преобразованием;
   <li><samp>pointers</samp> - указатели на области памяти, куда следует помещать результаты преобразований. 
   </ul>
  Если для заданного формата не хватает указателей, результат непредсказуем; если же указателей слишком много, лишние просто игнорируются.
  <p> Формат обычно содержит спецификаторы преобразований, которые задают способ интерпретации вводимых данных. В формате могут содержаться:
  <ol>
   <li>Пробельные символы (собственно пробел, табуляция, перевод строки, переход к новой странице), которые (за исключением двух описанных ниже случаев) вызывают чтение до следующего непробельного символа.
   <li>Обычный символ (не <samp>%</samp>), который должен совпадать со следующим символом потока ввода.
   <li>Спецификаторы преобразований, состоящие из символа <samp>%</samp>, необязательного символа подавления присваивания <samp>*</samp>, необязательного числа, задающего максимальную ширину поля в потоке ввода, необязательного символа l или h, указывающего размер переменной, получающей значение, а также кода преобразования. 
  </ol>
<p>Спецификатор задает способ преобразования текущего входного поля; результат присваивается переменной, на которую указывает соответствующий аргумент <samp>pointer</samp>, если не задано подавление присваивания. Подавление присваивания позволяет пропускать в потоке ввода отдельные поля. Поле в потоке ввода определяется как последовательность символов, не содержащая пробелов, которая либо ограничивается "неуместным" (в данном контексте) символом, либо определяется шириной, если она задана. Для всех преобразований, кроме <samp>[</samp> и <samp>c</samp>, пробелы в начале поля игнорируются. 
</td></tr>
<tr><td width=10%>&nbsp;</td>
<td>
Код преобразования определяет способ интерпретации входного поля; соответствующий аргумент-указатель, как правило, должен иметь соответствующий тип. Для пропускаемых полей указатель не задается. Распознаются следующие коды преобразований:
<ul>
<li><samp>%</samp> -	Из потока ввода должен быть прочитан единственный символ<samp> %</samp>; никаких присваиваний не выполняется.
<li><samp>d </samp>-	Из потока ввода должно быть прочитано целое десятичное число; соответствующий аргумент должен быть указателем на целое.
<li><samp>u </samp>-	Из потока ввода должно быть прочитано целое десятичное без знака; соответствующий аргумент должен быть указателем на целое без знака.
<li><samp>o </samp>-	Из потока ввода должно быть прочитано целое восьмеричное число; соответствующий аргумент должен быть указателем на целое.
<li><samp>x </samp>-	Из потока ввода должно быть прочитано целое шестнадцатеричное число; соответствующий аргумент должен быть указателем на целое.
<li><samp>i</samp> -	Из потока ввода должно быть прочитано целое число; соответствующий аргумент должен быть указателем на целое. Значение числа вычисляется в соответствии с соглашениями языка C: префикс <samp>0</samp> обозначает восьмеричное число, префикс <samp>0x</samp> - шестнадцатеричное, отсутствие префикса - десятичное.
<li><samp>n </samp>-	Общее количество символов (включая пробельные), прочитанных с начала выполнения функции, запоминается в очередной переменной из списка аргументов. Из потока ввода ничего не читается.
<li><samp>e, f, g</samp> -	Из потока ввода должно быть прочитано число с плавающей точкой; оно представляет собой последовательность цифр с необязательным знаком, необязательной десятичной точкой и необязательным порядком; порядок обозначается буквой <samp>e</samp> или <samp>E</samp>, за которой может следовать <samp>+</samp>, - или пробел, а затем - целое число. Соответствующий аргумент должен быть указателем на переменную типа <samp>float</samp>.
<li><samp>s </samp>-	Из потока ввода должна быть прочитана цепочка символов; соответствующий аргумент должен быть указателем на символьный массив достаточной длины, чтобы в нем поместились вводимые данные с завершающим пустым символом <samp>\0</samp>, который добавляется автоматически. Признак конца входного поля - пробельный символ.
<li><samp>c </samp>-	Из потока ввода должен быть прочитан единственный символ; соответствующий аргумент должен быть указателем на символ. Обычный пропуск пробельных символов в этом случае не производится; для чтения ближайшего непробельного символа нужно задать спецификатор <samp>%1s</samp>. Если задана ширина поля, то соответствующий аргумент должен указывать на символьный массив; в этом случае вводится заданное количество символов.
<li><samp>[</samp> -	Входные данные обрабатываются особым образом. За открывающей скобкой следует ряд символов, которые называются шаблоном сканирования, а затем закрывающая скобка; входное поле представляет собой максимальный участок потока ввода, состоящий исключительно из символов шаблона. Если первым символом шаблона является <samp>^</samp>, это означает, что входное поле представляет собой максимальный участок потока ввода, содержащий любые символы кроме перечисленных в шаблоне. Шаблон сканирования записывается по определенным правилам. Несколько символов можно задать конструкцией первый-последний; таким образом, ряд <samp>[0123456789]</samp> можно изобразить как <samp>[0-9]</samp>. При использовании этого правила первый должен быть лексикографически меньше или равен последнему, иначе минус рассматривается как обычный символ шаблона. Минус рассматривается как обычный символ, если он находится на первом или на последнем месте в шаблоне. Если в шаблон нужно включить закрывающую скобку, то она должна быть самым первым символом шаблона (возможно, с предшествующим <samp>^</samp>), в противном случае она рассматривается как ограничитель шаблона. Соответствующий этому спецификатору аргумент должен быть указателем на символьный массив достаточной длины, способный вместить читаемые данные вместе с ограничителем <samp>\0</samp>, добавляемым автоматически. Это преобразование считается завершившимся успешно, если из потока ввода выбран хотя бы один символ, соответствующий шаблону. 
</ul>
<p>
Кодам преобразований <samp>d, u, o, x, i </samp>может предшествовать символ <samp>l</samp> или <samp>h</samp>, означающий, что соответствующий аргумент указывает на переменную типа <samp>long</samp> или <samp>short</samp>, а не <samp>int</samp>. Аналогично, кодам <samp>e, f, g </samp>может предшествовать символ <samp>l</samp>, означающий, что соответствующий аргумент указывает на переменную типа <samp>double</samp>, а не <samp>float</samp>. Для остальных кодов преобразований модификаторы <samp>l</samp> и <samp>h</samp> игнорируются.
<p>
Функция <samp>scanf</samp> завершается по концу файла, при исчерпании формата или при обнаружении в потоке ввода символа, противоречащего формату. В последнем случае символ-нарушитель остается непрочитанным в потоке ввода.,
<p>
Функция <samp>scanf</samp> возвращает число успешно введенных и преобразованных величин; это число может оказаться нулем, если слишком рано обнаружилось несоответствие с форматом. Если ввод закончился без конфликтов и преобразований, результат равен <samp>EOF</samp>. 
</td>
</tr>
</table>


<p><b>Возвращаемое значение</b>

<table width=100%>
<tr><td width=10%>&nbsp;</td>
<td>Описанные функции возвращают значение <samp>EOF</samp> при исчерпании потока ввода, или число успешно введенных и преобразованных величин. 
При ошибках выполнения возвращают -1 и устанавливают
<samp><a href=_errno.html>errno</a></samp>.
</td></tr>
</table>

<p><hr>
<a href=mind.html#wait>Список системных вызовов</a>
</body>
</html>
